#! /usr/bin/env bash

function tue-make
{
    if [ -n "$TUE_ROS_DISTRO" ] && [ -d $_TUE_CATKIN_SYSTEM_DIR ]
    then
        case $(cat $_TUE_CATKIN_SYSTEM_DIR/devel/.built_by) in
        'catkin_make')
            catkin_make --directory $_TUE_CATKIN_SYSTEM_DIR -DCMAKE_BUILD_TYPE=RelWithDebInfo $@
            ;;
        'catkin build')
            catkin build --workspace $_TUE_CATKIN_SYSTEM_DIR $@
            ;;
        '')
            catkin init --workspace $_TUE_CATKIN_SYSTEM_DIR $@
            catkin build --workspace $_TUE_CATKIN_SYSTEM_DIR $@
            ;;
        esac
    fi
}

tue-make $@
